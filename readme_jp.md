<p align='center'>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/421327a5-1cf1-46ad-93b1-15c9c9d36490' alt='' width='800'/>
</p>


<details align='center'>
    <summary> ğŸ“· ã€ŒConnect-AIã€ã®ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’å±•é–‹ã™ã‚‹ã«ã¯ã€ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</summary>
    <br>
    <p align='center'>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/b993c610-1c91-40dd-bdcd-85a992c17b74' alt='è¯­éŸ³å¯¹è¯' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/149f5fda-3fc4-49fa-8132-4825edfece1f' alt='è§’è‰²æ‰®æ¼”' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/7dae5661-2d4c-4584-934c-747a8c68d3e9' alt='è§’è‰²æ‰®æ¼”' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/942ffb30-fb48-4de4-a696-e0903a691665' alt='è§’è‰²åˆ—è¡¨' width='800'/>
    </p>
</details>



<br>

<p align='center'>
   Lark Ã—ï¼ˆGPT-4 + DALLÂ·E + Whisperï¼‰
<br>
<br>
    ğŸš€ Lark OpenAI ğŸš€
</p>

<p align='center'>
   www.qiniai.com
</p>

<strong align="center">
<samp>

[**English**](./readme.md) Â· [**ç®€ä½“ä¸­æ–‡**](https://github.com/ConnectAI-E/Feishu-OpenAI)Â· [**ç¹é«”ä¸­æ–‡**](./readme_zh-hk.md) Â· [**æ—¥æœ¬èª**](./readme_jp.md) Â· [**Tiáº¿ng Viá»‡t**](./readme_vi.md)

</samp>
</strong>


## ğŸ‘»ãƒ­ãƒœãƒƒãƒˆã®æ©Ÿèƒ½

ğŸ—£ éŸ³å£°ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼šå€‹äººçš„ãªä¼šè©±ãŒã§ãã‚‹

ğŸ’¬ è¤‡æ•°ã®ãƒˆãƒ”ãƒƒã‚¯ã§ã®å¯¾è©±ï¼šå€‹äººã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã§è¤‡æ•°ã®ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦è©±ã—åˆãˆã‚‹

ğŸ–¼ ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ç”»åƒã¸ï¼šãƒ†ã‚­ã‚¹ãƒˆã‚’ç”»åƒã«å¤‰æ›ã—ãŸã‚Šã€ç”»åƒã‚’æ¤œç´¢ã—ãŸã‚Šã§ãã‚‹

ğŸ›– ã‚·ãƒŠãƒªã‚ªè¨­å®šï¼šè±Šå¯Œãªã‚·ãƒŠãƒªã‚ªãƒªã‚¹ãƒˆãŒå†…è”µã•ã‚Œã¦ãŠã‚Šã€ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§AIã®å½¹å‰²ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹

ğŸ­ ãƒ­ãƒ¼ãƒ«ãƒ—ãƒ¬ã‚¤ï¼šã‚·ãƒŠãƒªã‚ªãƒ¢ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã®æ¥½ã—ã•ã¨å‰µé€ æ€§ã‚’é«˜ã‚ã‚‹

ğŸ¤– AIãƒ¢ãƒ¼ãƒ‰ï¼š4ã¤ã®AIãƒ¢ãƒ¼ãƒ‰ãŒå†…è”µã•ã‚Œã¦ãŠã‚Šã€AIã®çŸ¥è­˜ã¨å‰µé€ æ€§ã‚’ä½“æ„Ÿã§ãã‚‹

ğŸ”„ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¿æŒï¼šå¯¾è©±ãƒœãƒƒã‚¯ã‚¹ã«è¿”ä¿¡ã™ã‚‹ã ã‘ã§ã€åŒã˜ãƒˆãƒ”ãƒƒã‚¯ã®ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚’ç¶šã‘ã‚‰ã‚Œã‚‹

â° è‡ªå‹•çµ‚äº†ï¼šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«ã‚ˆã‚Šè‡ªå‹•çš„ã«å¯¾è©±ãŒçµ‚äº†ã—ã€ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´ã‚’ã‚¯ãƒªã‚¢ã§ãã‚‹

ğŸ“ ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ï¼šãƒªãƒƒãƒãªãƒ†ã‚­ã‚¹ãƒˆã‚«ãƒ¼ãƒ‰ã®è¿”ä¿¡ã‚’ã‚µãƒãƒ¼ãƒˆã—ã€æƒ…å ±ã‚’ã‚ˆã‚Šè±Šã‹ã«è¡¨ç¤ºã§ãã‚‹

ğŸ‘ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼šå³æ™‚ã«ãƒ­ãƒœãƒƒãƒˆã®å‡¦ç†çµæœã‚’å–å¾—ã§ãã‚‹

ğŸ° æ®‹é«˜ç…§ä¼šï¼šãƒˆãƒ¼ã‚¯ãƒ³ã®æ¶ˆè²»çŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ç¢ºèªã§ãã‚‹

ğŸ”™ å±¥æ­´ã®å·»ãæˆ»ã—ï¼šç°¡å˜ã«éå»ã®å¯¾è©±ã«æˆ»ã‚Šã€ãƒˆãƒ”ãƒƒã‚¯ã®ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ã‚’ç¶šã‘ã‚‰ã‚Œã‚‹ ğŸš§

ğŸ”’ ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ï¼šå†…è”µã•ã‚ŒãŸç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã€ã‚ˆã‚Šå®‰å…¨ã‹ã¤ä¿¡é ¼æ€§ã®é«˜ã„åˆ©ç”¨ãŒå¯èƒ½ ğŸš§

ğŸŒ è¤‡æ•°ãƒˆãƒ¼ã‚¯ãƒ³ã®è² è·åˆ†æ•£ï¼šé«˜é »åº¦ã®ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ«ã®ã‚·ãƒŠãƒªã‚ªã‚’æœ€é©åŒ–

â†©ï¸ é€†ãƒ—ãƒ­ã‚­ã‚·ã®ã‚µãƒãƒ¼ãƒˆï¼šç•°ãªã‚‹åœ°åŸŸã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã‚ˆã‚Šé«˜é€Ÿã‹ã¤å®‰å®šã—ãŸã‚¢ã‚¯ã‚»ã‚¹ä½“é¨“ã‚’æä¾›

ğŸ“š Feishuãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®ç›¸äº’ä½œç”¨ï¼šä¼æ¥­ã®å¾“æ¥­å“¡ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã«ãªã‚‹ ğŸš§

ğŸ¥ ãƒˆãƒ”ãƒƒã‚¯ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç¬æ™‚ã«PPTã«å¤‰æ›ï¼šãƒ—

ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚ˆã‚Šç°¡å˜ã«ã™ã‚‹ ğŸš§

ğŸ“Š ãƒ†ãƒ¼ãƒ–ãƒ«åˆ†æï¼šFeishuã®è¡¨ã‚’ç°¡å˜ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ãƒ‡ãƒ¼ã‚¿åˆ†æã®åŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã‚‹ ğŸš§

ğŸŠ ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ï¼šä¼šç¤¾ã®è£½å“æƒ…å ±ã‚’ä½¿ç”¨ã—ã¦GPTã‚’äºŒæ¬¡ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã€é¡§å®¢ã®å€‹åˆ¥ã®è¦æ±‚ã«ã‚ˆã‚Šé©ã—ãŸã‚‚ã®ã«ã™ã‚‹ ğŸš§



## ğŸŒŸ ãƒ™ãƒ¼ã‚¹

- ğŸ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã¯OpenAI-[GPT4](https://platform.openai.com/account/api-keys)ã¨[Lark](https://www.larksuite.com/)ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚
- ğŸ¥’ [Serverless](https://github.com/serverless-devs/serverless-devs)ã€[local](https://dashboard.cpolar.com/login)ã€[Docker](https://www.docker.com/)ã€[ãƒã‚¤ãƒŠãƒªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://github.com/Leizhenpeng/feishu-chatgpt/releases/)ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

## ğŸ›µ é–‹ç™º

<details>
    <summary>ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º</summary>
<br>

```bash
git clone git@github.com:ConnectAI-E/lark-openai.git
cd Lark-OpenAI/code
```

ã‚µãƒ¼ãƒãƒ¼ãŒãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯IPã‚’æŒã£ã¦ã„ãªã„å ´åˆã¯ã€ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚

Flying Bookã®ã‚µãƒ¼ãƒãƒ¼ã¯ä¸­å›½ã‹ã‚‰ngrokã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã®ãŒéå¸¸ã«é…ã„ãŸã‚ã€å›½å†…ã®ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚

- [cpolar](https://dashboard.cpolar.com/)
- [natapp](https://natapp.cn/)

```bash
# config.yamlã‚’è¨­å®šã™ã‚‹
mv config.example.yaml config.yaml

// ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãƒ†ã‚¹ãƒˆ
go run ./
cpolar http 9000

// æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
nohup cpolar http 9000 -log=stdout &

// ã‚µãƒ¼ãƒãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç¢ºèªã™ã‚‹
https://dashboard.cpolar.com/status

// ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã™ã‚‹
ps -ef | grep cpolar
kill -9 PID
```

<br>

</details>

<details>
    <summary>Serverlessé–‹ç™º</summary>
<br>

```bash
git clone git@github.com:ConnectAI/lark-openai.git
cd Lark-OpenAI/code
```

[severless](https://docs.serverless-devs.com/serverless-devs/quick_start)ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹

```bash
# config.yamlã‚’è¨­å®šã™ã‚‹
mv config.example.yaml config.yaml
# severless cliã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
npm install @serverless-devs/s -g
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¨ä»¥ä¸‹ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«`severless`ã«å¾“ã£ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã ã•ã„ã€‚

- ãƒ­ãƒ¼ã‚«ãƒ« `linux`/`mac os` ç’°å¢ƒ

1. 's.yaml'å†…ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚­ãƒ¼ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```
edition: 1.0.0
name: lark-openai
access: "aliyun" # ã‚«ã‚¹ã‚¿ãƒ ã‚­ãƒ¼åã‚’ä¿®æ­£ã—ã¾ã™ã€‚

vars: # ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
region: "cn-hongkong" # ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã„ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```

2. ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd ..
s deploy
```

- ãƒ­

ãƒ¼ã‚«ãƒ« `windows`

1. ã¾ãšã€ãƒ­ãƒ¼ã‚«ãƒ«ã® `cmd` ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ„ãƒ¼ãƒ«ã‚’é–‹ãã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ä¸Šã®Goã®ç’°å¢ƒå¤‰æ•°ã®è¨­å®šã‚’ç¢ºèªã™ã‚‹ãŸã‚ã« `go env` ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ä»¥ä¸‹ã®å¤‰æ•°ã¨å€¤ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

```cmd
set GO111MODULE=on
set GOARCH=amd64
set GOOS=linux
set CGO_ENABLED=0
```

å€¤ãŒæ­£ã—ããªã„å ´åˆï¼ˆä¾‹ï¼šã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ä¸Šã§ `set GOOS=windows` ã®ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆï¼‰ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ `GOOS` ã®å¤‰æ•°å€¤ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

```cmd
go env -w GOOS=linux
```

2. `s.yaml` å†…ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚­ãƒ¼ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```
edition: 1.0.0
name: lark-openai
access: "aliyun" # ã‚«ã‚¹ã‚¿ãƒ ã‚­ãƒ¼ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

vars: # ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
  region: "cn-hongkong" # ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```

3. `s.yaml` å†…ã® `pre-deploy` ã‚’ä¿®æ­£ã—ã€2ç•ªç›®ã®ã‚¹ãƒ†ãƒƒãƒ— `run` ã®å‰ã®ãƒªãƒ³ã‚°å¤‰æ•°ã®å¤‰æ›´éƒ¨åˆ†ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

```
  pre-deploy:
        - run: go mod tidy
          path: ./code
        - run: go build -o
            target/main main.go  # GO111MODULE=on GOOS=linux GOARCH=amd64 CGO_ENABLED=0 ã®éƒ¨åˆ†ã‚’å‰Šé™¤ã™ã‚‹
          path: ./code

```

4. ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd ..
s deploy
```

<br>
</details>

<!-- <details>
    <summary>Railway Deployment </summary>


Just configure environment variables on the platform. The process of deploying this project is as follows:

#### 1. Generate the Railway project

Click the button below to create a corresponding Railway project, which will automatically fork this project to your GitHub account.

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/10D-TF?referralCode=oMcVS2)

#### 2. Generate the Railway project

In the opened page, configure the environment variables. The description of each variable is shown in the figure below:

<img src='https://user-images.githubusercontent.com/50035229/225005602-88d8678f-9d17-4dc5-8d1e-4abf64fb84fd.png' alt='Railway ç¯å¢ƒå˜é‡' width='500px'/>

#### 3. deployment project

After filling in the environment variables, click Deploy to complete the deployment of the project. After the deployment is complete, you need to obtain the corresponding domain name for the Feishu robot to access, as shown in the following figure:

<img src='https://user-images.githubusercontent.com/50035229/225006236-57cb3c8a-1b7d-4bfe-9c9b-099cb9179027.png' alt='Railway åŸŸå' width='500px'/>

Uncertainty about success or failure of self-determinationï¼Œcan be passed through the above mentioned area name (https://xxxxxxxx.railway.app/ping)

ï¼ŒThe result returned `pong`ï¼ŒThe description department succeeded.ã€‚

</details> -->

<details>
    <summary>Docker é–‹ç™º</summary>
<br>

```bash
docker build -t lark-openai:latest .
docker run -d --name lark-openai -p 9000:9000 \
--env APP_LANG=en \
--env APP_ID=xxx \
--env APP_SECRET=xxx \
--env APP_ENCRYPT_KEY=xxx \
--env APP_VERIFICATION_TOKEN=xxx \
--env BOT_NAME=chatGpt \
--env OPENAI_KEY="sk-xxx1,sk-xxx2,sk-xxx3" \
--env API_URL="https://api.openai.com" \
--env HTTP_PROXY="" \
feishu-chatgpt:latest
```

æ³¨æ„ï¼š

- `APP_LANG` ã¯Larkãƒœãƒƒãƒˆã®è¨€èªã§ã™ã€‚ä¾‹ãˆã°,`en`,`ja`,`vi`,`zh-hk`.
- `BOT_NAME` ã¯Larkãƒœãƒƒãƒˆã®åå‰ã§ã™ã€‚ä¾‹ãˆã°ã€`chatGpt`ã§ã™ã€‚
- `OPENAI_KEY` ã¯OpenAIã®ã‚­ãƒ¼ã§ã™ã€‚è¤‡æ•°ã®ã‚­ãƒ¼ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã¯ã€ã‚«ãƒ³ãƒã§åŒºåˆ‡ã£ã¦æŒ‡å®šã—ã¾ã™ã€‚ä¾‹ãˆã°ã€`sk-xxx1,sk-xxx2,sk-xxx3`ã§ã™ã€‚
- `HTTP_PROXY` ã¯ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã®ãƒ—ãƒ­ã‚­ã‚·ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚ä¾‹ãˆã°ã€`http://host.docker.internal:7890`ã§ã™ã€‚ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„å ´åˆã¯ã€ã“ã‚Œã‚’æœªè¨­å®šã®ã¾ã¾ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
- `API_URL` ã¯OpenAIã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚ä¾‹ãˆã°ã€`https://api.openai.com`ã§ã™ã€‚ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„å ´åˆã¯ã€ã“ã‚Œã‚’æœªè¨­å®šã®ã¾ã¾ã«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---

Azureãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãŸã‚ã«ã¯

```bash
docker build -t lark-openai:latest .
docker run -d --name lark-openai -p 9000:9000 \
--env APP_LANG=en \
--env APP_ID=xxx \
--env APP_SECRET=xxx \
--env APP_ENCRYPT_KEY=xxx \
--env APP_VERIFICATION_TOKEN=xxx \
--env BOT_NAME=chatGpt \
--env AZURE_ON=true \
--env AZURE_API_VERSION=xxx \
--env AZURE_RESOURCE_NAME=xxx \
--env AZURE_DEPLOYMENT_NAME=xxx \
--env AZURE_OPENAI_TOKEN=xxx \
lark-openai:latest
```

æ³¨æ„ï¼š
- `APP_LANG` ã¯Larkãƒœãƒƒãƒˆã®è¨€èªã§ã™ã€‚ä¾‹ãˆã°,`en`,`ja`,`vi`,`zh-hk`.
- `BOT_NAME` ã¯Larkãƒœãƒƒãƒˆã®åå‰ã§ã™ã€‚ä¾‹ãˆã°ã€`chatGpt`ã§ã™ã€‚
- `AZURE_ON` ã¯Azureã‚’ä½¿ç”¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¤ºã—ã¾ã™ã€‚`true`ã«è¨­å®šã—ã¦ãã ã•ã„ã€‚
- `AZURE_API_VERSION` ã¯Azureã®APIãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚ä¾‹ãˆã°ã€`2023-03-15-preview`ã§ã™ã€‚
- `AZURE_RESOURCE_NAME` ã¯Azureã®ãƒªã‚½ãƒ¼ã‚¹åã§ã‚ã‚Šã€`https://{AZURE_RESOURCE_NAME}.openai.azure.com`ã¨ä¼¼ãŸå½¢å¼ã§ã™ã€‚
- `AZURE_DEPLOYMENT_NAME` ã¯Azureã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆåã§ã‚ã‚Šã€`https://{AZURE_RESOURCE_NAME}.openai.azure.com/deployments/{AZURE_DEPLOYMENT_NAME}/chat/completions`ã¨ä¼¼ãŸå½¢å¼ã§ã™ã€‚
- `AZURE_OPENAI_TOKEN` ã¯Azureã®OpenAIãƒˆãƒ¼ã‚¯ãƒ³ã§ã™ã€‚

</details>

<details>
    <summary>Docker-Compose é–‹ç™º</summary>
<br>

docker-compose.yamlã‚’ç·¨é›†ã—ã€ç’°å¢ƒå¤‰æ•°ã‚’environmentã§è¨­å®šã™ã‚‹ã‹ã€volumesã‚’ä½¿ç”¨ã—ã¦å¯¾å¿œã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹
docker compose build

# ã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã™ã‚‹
docker compose up -d

# ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢ã™ã‚‹
docker compose down
```

ã‚¤ãƒ™ãƒ³ãƒˆã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼šhttp://IP:9000/webhook/event
    
ã‚«ãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯

ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼šhttp://IP:9000/webhook/card

</details>


## è©³ç´°ãªè¨­å®šæ‰‹é †

<details align='left'>
    <summary> ğŸ“¸ Larkãƒ­ãƒœãƒƒãƒˆã®è¨­å®šã®ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚¬ã‚¤ãƒ‰ã‚’å±•é–‹ã™ã‚‹ã«ã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</summary>
    <br>
    <p align='center'>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/a2bf0588-0fff-48a7-a253-25d237c37f0e' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/60b9dc76-3117-42c0-8086-6d5938161127' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/1f46d819-a063-42fd-bf28-6d31086e1912' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/47057139-1e09-48da-97ff-86f9021182f0' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/91dc1b09-664e-4dea-b6b8-ca7a656d1ac4' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/272bb80c-b9aa-49e2-9411-c0357ca03fe8' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/aed03155-22cd-446a-96d8-54cfd95e04fb' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/8f306e96-8767-480f-858f-41623038dbd2' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/b9a6d27f-f225-4d02-8b05-b8ab4dd55fa5' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/b2fbe22f-4920-4628-b673-011d036ae4fb' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/607db6b7-07d2-4307-9ded-9e959bd15fcf' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/fd8eded1-d248-4552-94d2-21e983d24dcd' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/4d7b0a16-2871-4472-bd78-78d3989c050d' alt

='' width='800'/>
    </p>
</details>


- [OpenAI](https://platform.openai.com/account/api-keys)ã‹ã‚‰APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ãã ã•ã„ï¼ˆ ğŸ™‰ ä»¥ä¸‹ã¯èª°ã§ã‚‚åˆ©ç”¨ã§ãã‚‹ç„¡æ–™ã®ã‚­ãƒ¼ã§ã™ï¼‰
- [Lark](https://open.larksuit.com/)ãƒœãƒƒãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„
    1. [Feishu Open Platform](https://open.feishu.cn/?lang=en-US)ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã€APPIDã¨Secretã‚’å–å¾—ã—ã¦ãã ã•ã„
    2. ã€ŒFeatures-Botã€ã«ç§»å‹•ã—ã€ãƒœãƒƒãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„
    3. cpolarã€serverlessã€ã¾ãŸã¯Railwayã‹ã‚‰å…¬é–‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã€Larkãƒœãƒƒãƒˆã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã€Œã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ä¾‹ï¼š
   - `http://xxxx.r6.cpolar.top` ã¯cpolarã«ã‚ˆã£ã¦å…¬é–‹ã•ã‚ŒãŸå…¬é–‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚
   - `/webhook/event` ã¯çµ±ä¸€ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ«ãƒ¼ãƒˆã§ã™ã€‚
   - æœ€çµ‚çš„ãªã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ `http://xxxx.r6.cpolar.top/webhook/event` ã§ã™ã€‚
   
    4. Larkãƒœãƒƒãƒˆã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã€Œãƒœãƒƒãƒˆã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆURLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ä¾‹ï¼š
   - `http://xxxx.r6.cpolar.top` ã¯cpolarã«ã‚ˆã£ã¦å…¬é–‹ã•ã‚ŒãŸå…¬é–‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã™ã€‚
   - `/webhook/card` ã¯çµ±ä¸€ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ«ãƒ¼ãƒˆã§ã™ã€‚
   - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ãƒ¼ãƒ‰ã®æœ€çµ‚çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆURLã¯ `http://xxxx.r6.cpolar.top/webhook/card` ã§ã™ã€‚

    5. ã€Œã‚¤ãƒ™ãƒ³ãƒˆè³¼èª­ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€æ¬¡ã®3ã¤ã®ç”¨èªã‚’æ¤œç´¢ã—ã¦ãã ã•ã„ï¼šã€ŒBot Join Groupã€ã€ã€ŒReceive Messagesã€ã€ã€ŒMessages Readã€ã€‚ãã‚Œã‚‰ã®èƒŒå¾Œã«ã‚ã‚‹ã™ã¹ã¦ã®æ¨©é™ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
   æ¨©é™ç®¡ç†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ç§»å‹•ã—ã€ã€ŒImageã€ã‚’æ¤œç´¢ã—ã€ã€ŒGet and upload image or file resourcesã€ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
   æœ€å¾Œã«ã€æ¬¡ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚
        - im:resourceï¼ˆç”»åƒã‚„ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ãŠã‚ˆã³ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼‰
        - im:message
        - im:message.group_at_msgï¼ˆãƒœãƒƒãƒˆã‚’ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ãŸã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã¿å–ã‚‹ï¼‰
        - im:message.group_at_msg:readonlyï¼ˆãƒœãƒƒãƒˆã‚’ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³ã—ãŸã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã™ã‚‹ï¼‰
        - im:message.p2p_msgï¼ˆãƒœãƒƒãƒˆã«é€ä¿¡ã•ã‚ŒãŸå€‹äººãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’èª­ã¿å–ã‚‹ï¼‰
        - im:message.p2p_msg:readonlyï¼ˆãƒœãƒƒãƒˆã«é€ä¿¡ã•ã‚ŒãŸå€‹äººãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã™ã‚‹ï¼‰
        - im:message:send_as_botï¼ˆã‚¢ãƒ—ãƒªã¨ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ã‚’é€ä¿¡ã™ã‚‹ï¼‰
        - im:chat:readonlyï¼ˆã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ã‚’å–å¾—ã™ã‚‹ï¼‰
        - im:chatï¼ˆã‚°ãƒ«ãƒ¼ãƒ—æƒ…å ±ã‚’å–å¾—ãŠã‚ˆã³æ›´æ–°ã™ã‚‹ï¼‰

5. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¬é–‹ã—ã€ä¼æ¥­ç®¡ç†è€…ã®æ‰¿èªã‚’å¾…ã¡ã¾ã™

## Connect-AI è©³ç´°


|       <div style="width:300px">AI</div>        |                            <img width=100> SDK <img width=100>                             |                         Application                          |
| :---------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|      ğŸ’OpenAI      |    [Go-OpenAI](https://github.com/ConnectAI-E/Go-OpenAI)     | [ğŸ…Feishu-OpenAI](https://github.com/ConnectAI-E/Feishu-OpenAI), [Lark-OpenAI](https://github.com/ConnectAI-E/Lark-OpenAI), [ğŸ…Feishu-EX-ChatGPT](https://github.com/ConnectAI-E/Feishu-EX-ChatGPT), [Feishu-OpenAI-Stream-Chatbot](https://github.com/ConnectAI-E/Feishu-OpenAI-Stream-Chatbot), [Feishu-OpenAI-Amazing](https://github.com/ConnectAI-E/Feishu-OpenAI-Amazing), [Feishu-Oral-Friend](https://github.com/ConnectAI-E/Feishu-Oral-Friend), [Feishu-OpenAI-Base-Helper](https://github.com/ConnectAI-E/Feishu-OpenAI-Base-Helper), [Feishu-Vector-Knowledge-Management](https://github.com/ConnectAI-E/Feishu-Vector-Knowledge-Management), [Feishu-OpenAI-PDF-Helper](https://github.com/ConnectAI-E/Feishu-OpenAI-PDF-Helper), [ğŸ…Dingtalk-OpenAI](https://github.com/ConnectAI-E/Dingtalk-OpenAI), [Wework-OpenAI](https://github.com/ConnectAI-E/Wework-OpenAI), [WeWork-OpenAI-Node](https://github.com/ConnectAI-E/WeWork-OpenAI-Node), [llmplugin](https://github.com/ConnectAI-E/llmplugin) |
|  ğŸ­ Stablediffusion  |                            ------                            | [ğŸ…Feishu-Stablediffusion](https://github.com/ConnectAI-E/Feishu-Stablediffusion) |
|   ğŸ Midjourney    | [Go-Midjourney](https://github.com/ConnectAI-E/Feishu-Midjourney/tree/main/midjourney) | [ğŸ…Feishu-Midjourney](https://github.com/ConnectAI-E/Feishu-Midjourney), [MidJourney-Web](https://github.com/ConnectAI-E/MidJourney-Web), [Dingtalk-Midjourney](https://github.com/ConnectAI-E/Dingtalk-Midjourney) |
|    ğŸ æ–‡å¿ƒä¸€è¨€     |    [Go-Wenxin](https://github.com/ConnectAI-E/Go-Wenxin)     | [Feishu-Wenxin](https://github.com/ConnectAI-E/Feishu-Wenxin), [Dingtalk-Wenxin](https://github.com/ConnectAI-E/Dingtalk-Wenxin), [Wework-Wenxin](https://github.com/ConnectAI-E/Wework-Wenxin) |
|     ğŸ’¸ Minimax     |   [Go-Minimax](https://github.com/ConnectAI-E/Go-Minimax)    | [Feishu-Minimax](https://github.com/ConnectAI-E/Feishu-Minimax), [Dingtalk-Minimax](https://github.com/ConnectAI-E/Dingtalk-Minimax), [Wework-Minimax](https://github.com/ConnectAI-E/Wework-Minimax) |
|     â›³ï¸ CLAUDE      |    [Go-Claude](https://github.com/ConnectAI-E/Go-Claude)     | [Feishu-Claude](https://github.com/ConnectAI-E/Feishu-Claude), [DingTalk-Claude](https://github.com/ConnectAI-E/DingTalk-Claude), [Wework-Claude](https://github.com/ConnectAI-E/Wework-Claude) |
|     ğŸ¡ Prompt      |                                                              | [Prompt-Engineering-Tutior](https://github.com/ConnectAI-E/Prompt-Engineering-Tutior) |
|     ğŸ¤–ï¸ ChatGLM     |                                                              | [Feishu-ChatGLM](https://github.com/ConnectAI-E/Feishu-ChatGLM) |




