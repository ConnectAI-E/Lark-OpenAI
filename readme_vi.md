<p align='center'>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/421327a5-1cf1-46ad-93b1-15c9c9d36490' alt='' width='800'/>
</p>


<details align='center'>
    <summary> 📷 Nhấp để mở rộng chức năng đầy đủ của Connect-AI</summary>
    <br>
    <p align='center'>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/b993c610-1c91-40dd-bdcd-85a992c17b74' alt='语音对话' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/149f5fda-3fc4-49fa-8132-4825edfece1f' alt='角色扮演' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/7dae5661-2d4c-4584-934c-747a8c68d3e9' alt='角色扮演' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/50035229/942ffb30-fb48-4de4-a696-e0903a691665' alt='角色列表' width='800'/>
    </p>
</details>



<br>

<p align='center'>
   Lark ×（GPT-4 + DALL·E + Whisper）
<br>
<br>
    🚀 Lark OpenAI 🚀
</p>

<p align='center'>
   www.qiniai.com
</p>




<strong align="center">
<samp>

[**English**](./readme.md) · [**简体中文**](./readme_zh.md)· [**繁體中文**](./readme_zh-hk.md) · [**日本語**](./readme_jp.md) · [**Tiếng Việt**](./readme_vi.md)

</samp>
</strong>


## 👻 Tính năng

🗣 Giao tiếp bằng giọng nói: Nhắn riêng tư trực tiếp với các robot

💬 Đối thoại đa chủ đề: Hỗ trợ thảo luận đa chủ đề trong cuộc trò chuyện riêng tư và nhóm, hiệu quả và liên kết

🖼 Đồ thị văn bản: Hỗ trợ đồ thị văn bản và tìm kiếm đồ thị

🛖 Cài đặt cảnh: Danh sách cảnh tích hợp sẵn, chuyển đổi vai trò AI chỉ với một cú nhấp chuột

🎭 Trò chơi vai trò: Hỗ trợ chế độ cảnh, thêm niềm vui và thảo luận sáng tạo

🤖 Chế độ AI: 4 chế độ AI tích hợp sẵn, cảm nhận sự thông minh và sáng tạo của AI

🔄 Bảo tồn ngữ cảnh: Trả lời cuộc đối thoại để tiếp tục thảo luận chủ đề tương tự

⏰ Tự động kết thúc: Tự động kết thúc cuộc đối thoại khi quá thời gian, hỗ trợ xóa lịch sử thảo luận

📝 Thẻ văn bản phong phú: Hỗ trợ trả lời bằng thẻ văn bản phong phú, mang đến thông tin đa sắc màu hơn

👍 Phản hồi tương tác: Truy cập ngay vào kết quả xử lý của robot

🎰 Truy vấn cân đối: Nhận thông tin tiêu thụ token theo thời gian thực

🔙 Quay lại lịch sử từng File: Dễ dàng quay lại lịch sử đối thoại từng File và tiếp tục thảo luận chủ đề🚧

🔒 Chế độ quản trị: Chế độ quản trị tích hợp sẵn, sử dụng an toàn và đáng tin cậy hơn🚧

🌐 Cân bằng tải đa token: Tối ưu hóa các tình huống gọi tần suất cao ở mức sản xuất

↩️ Hỗ trợ proxy ngược: Cung cấp trải nghiệm truy cập nhanh hơn và ổn định hơn cho người dùng ở các vùng khác nhau

📚 Tương tác với Tài liệu Flying Book: Trở thành Trợ lý Siêu hỗ trợ cho nhân viên Doanh nghiệp🚧

🎥 Chủ đề Nội dung giâ

y thành PPT: Làm báo cáo của bạn đơn giản hơn từ bây giờ trở đi🚧

📊 Phân tích bảng: Dễ dàng nhập bảng Flying Book để cải thiện hiệu suất phân tích dữ liệu🚧

🍊 Huấn luyện dữ liệu riêng tư: Sử dụng thông tin sản phẩm của công ty cho huấn luyện phụ thuộc GPT, đáp ứng tốt hơn nhu cầu cá nhân của khách hàng.🚧



## 🌟 Cơ bản

- 🍏 Đối thoại dựa trên OpenAI-[GPT4](https://platform.openai.com/account/api-keys) và [Lark](https://www.larksuite.com/)
- 🥒 Hỗ trợ [Serverless ](https://github.com/serverless-devs/serverless-devs)、[local](https://dashboard.cpolar.com/login)、[Docker](https://www.docker.com/)、[binary package](https://github.com/Leizhenpeng/feishu-chatgpt/releases/)


## 🛵 Phát triển


<details>
    <summary>Phát triển cục bộ</summary>
<br>

```bash
git clone git@github.com:ConnectAI-E/lark-openai.git
cd feishu-chatgpt/code
```

Nếu máy chủ của bạn không có địa chỉ IP mạng công khai, bạn có thể sử dụng proxy ngược.

Máy chủ của Flying Book rất chậm khi truy cập ngrok tại Trung Quốc, vì vậy khuyến nghị sử dụng các nhà cung cấp dịch vụ proxy ngược trong nước.

- [cpolar](https://dashboard.cpolar.com/)
- [natapp](https://natapp.cn/)

```bash
# Configure config.yaml
mv config.example.yaml config.yaml

// Testing deployment.
go run main.go
cpolar http 9000

//Production deployment
nohup cpolar http 9000 -log=stdout &

//Check server status
https://dashboard.cpolar.com/status

// Take down the service
ps -ef | grep cpolar
kill -9 PID
```

<br>

</details>

<details>
    <summary>Phát triển Serverless</summary>
<br>

```bash
git clone git@github.com:ConnectAI/lark-openai.git
cd feishu-chatgpt/code
```

Cài đặt [severless](https://docs.serverless-devs.com/serverless-devs/quick_start)tool

```bash
# Cấu hình config.yaml
mv config.example.yaml config.yaml
# Cài đặt severless cli
npm install @serverless-devs/s -g
```

Sau khi cài đặt hoàn tất, vui lòng triển khai theo môi trường cục bộ và hướng dẫn sau đây `severless`

- Môi trường cục bộ `linux`/`mac os`

1. Sửa đổi Vùng triển khai và Khóa triển khai trong 's.yaml'

```
edition: 1.0.0
name: lark-openai
access: "aliyun" #  Sửa đổi tên khóa tùy chỉnh.

vars: # Biến toàn cục
region: "cn-hongkong" # Sửa đổi vùng mà chức năng điện toán đám mây muốn triển khai.

```

2. Triển khai chỉ bằng một cú nhấp chuột
```bash
cd ..
s deploy
```
- Môi trường cục bộ `Windows`

1. Đầu tiên mở công cụ dòng lệnh `cmd` cục bộ, chạy `go env` để kiểm tra cài đặt biến môi trường go trên máy tính của bạn, xác nhận các biến và giá trị sau đây

```cmd
set GO111MODULE=on
set GOARCH=amd64
set GOOS=linux
set CGO_ENABLED=0
```

Nếu giá trị không chính xác, ví dụ như `set GOOS=windows` trên máy tính của bạn, vui lòng chạy lệnh sau để đặt giá trị biến `GOOS`

```cmd
go env -w GOOS=linux
```

2. Sửa đổi vùng triển khai và khóa triển khai trong `s.yaml`

```
edition: 1.0.0
name: lark-openai
access: "aliyun" #  Sửa đổi tên bí danh tùy chỉnh

vars: # Biến toàn cục
  region: "cn-hongkong" # Sửa đổi vùng triển khai mong muốn cho các chức năng điện toán đám mây

```

3. Sửa đổi `pre-deploy` trong `s.yaml`, xóa phần thay đổi biến ring trước bước thứ hai `run`

```
  pre-deploy:
        - run: go mod tidy
          path: ./code
        - run: go build -o
            target/main main.go  # Xóa GO111MODULE=on GOOS=linux GOARCH=amd64 CGO_ENABLED=0
          path: ./code

```

4. Triển khai chỉ bằng một cú nhấp chuột

```bash
cd ..
s deploy
```

<br>
</details>

<!-- <details>
    <summary>Railway Deployment </summary>


Just configure environment variables on the platform. The process of deploying this project is as follows:

#### 1. Generate the Railway project

Click the button below to create a corresponding Railway project, which will automatically fork this project to your GitHub account.

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/10D-TF?referralCode=oMcVS2)

#### 2. Generate the Railway project

In the opened page, configure the environment variables. The description of each variable is shown in the figure below:

<img src='https://user-images.githubusercontent.com/50035229/225005602-88d8678f-9d17-4dc5-8d1e-4abf64fb84fd.png' alt='Railway 环境变量' width='500px'/>

#### 3. deployment project

After filling in the environment variables, click Deploy to complete the deployment of the project. After the deployment is complete, you need to obtain the corresponding domain name for the Feishu robot to access, as shown in the following figure:

<img src='https://user-images.githubusercontent.com/50035229/225006236-57cb3c8a-1b7d-4bfe-9c9b-099cb9179027.png' alt='Railway 域名' width='500px'/>

Uncertainty about success or failure of self-determination，can be passed through the above mentioned area name (https://xxxxxxxx.railway.app/ping)

，The result returned `pong`，The description department succeeded.。

</details> -->

<details>
    <summary>Phát triển Docker</summary>
<br>

```bash
docker build -t lark-openai:latest .
docker run -d --name lark-openai -p 9000:9000 \
--env APP_LANG=en \
--env APP_ID=xxx \
--env APP_SECRET=xxx \
--env APP_ENCRYPT_KEY=xxx \
--env APP_VERIFICATION_TOKEN=xxx \
--env BOT_NAME=chatGpt \
--env OPENAI_KEY="sk-xxx1,sk-xxx2,sk-xxx3" \
--env API_URL="https://api.openai.com" \
--env HTTP_PROXY="" \
feishu-chatgpt:latest
```
Lưu ý:

- `BOT_NAME` là tên của bot Lark, ví dụ: `chatGpt`.
- `OPENAI_KEY` là mã OpenAI. Nếu bạn có nhiều mã, hãy phân tách chúng bằng dấu phẩy, ví dụ: `sk-xxx1,sk-xxx2,sk-xxx3`.
- `HTTP_PROXY` là địa chỉ proxy của máy chủ, ví dụ: `http://host.docker.internal:7890`. Nếu bạn không có proxy, bạn có thể để trống phần này.
- `API_URL` là địa chỉ kết nối API của OpenAI, ví dụ: `https://api.openai.com`. Nếu bạn không có proxy ngược, bạn có thể để trống phần này.

---

Để triển khai phiên bản Azure

```bash
docker build -t lark-openai:latest .
docker run -d --name lark-openai -p 9000:9000 \
--env APP_LANG=vi \
--env APP_ID=xxx \
--env APP_SECRET=xxx \
--env APP_ENCRYPT_KEY=xxx \
--env APP_VERIFICATION_TOKEN=xxx \
--env BOT_NAME=chatGpt \
--env AZURE_ON=true \
--env AZURE_API_VERSION=xxx \
--env AZURE_RESOURCE_NAME=xxx \
--env AZURE_DEPLOYMENT_NAME=xxx \
--env AZURE_OPENAI_TOKEN=xxx \
feishu-chatgpt:latest
```
    
Chú ý:

- `BOT_NAME` là tên của bot Lark, ví dụ: `chatGpt`.
- `AZURE_ON` chỉ ra liệu có sử dụng Azure hay không. Vui lòng đặt giá trị là `true`.
- `AZURE_API_VERSION` là phiên bản API Azure, ví dụ: `2023-03-15-preview`.
- `AZURE_RESOURCE_NAME` là tên tài nguyên Azure, tương tự `https://{AZURE_RESOURCE_NAME}.openai.azure.com`.
- `AZURE_DEPLOYMENT_NAME` là tên triển khai Azure, tương tự `https://{AZURE_RESOURCE_NAME}.openai.azure.com/deployments/{AZURE_DEPLOYMENT_NAME}/chat/completions`.
- `AZURE_OPENAI_TOKEN` là mã thông báo Azure OpenAI.

</details>

<details>
    <summary>Docker-Compose Development</summary>
<br>

Chỉnh sửa docker-compose.yaml, cấu hình biến môi trường tương ứng qua mục environment (hoặc mount tệp cấu hình tương ứng qua volumes), sau đó chạy các lệnh sau:
```bash
# Xây dựng hình ảnh
docker compose build

# Khởi động dịch vụ
docker compose up -d

# Dừng dịch vụ
docker compose down
```

Địa chỉ gọi lại sự kiện: http://IP:9000/webhook/event
    
Địa chỉ gọi lại thẻ: http://IP:9000/webhook/card

</details>


## Detailed configuration steps

<details align='left'>
    <summary> 📸 Nhấp vào đây để mở rộng hướng dẫn từng bước với hình ảnh cho cấu hình robot Lark.</summary>
    <br>
    <p align='center'>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/a2bf0588-0fff-48a7-a253-25d237c37f0e' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/60b9dc76-3117-42c0-8086-6d5938161127' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/1f46d819-a063-42fd-bf28-6d31086e1912' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/47057139-1e09-48da-97ff-86f9021182f0' alt='' width='800'/>
    <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/91dc1b09-664e-4dea-b6b8-ca7a656d1ac4' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/272bb80c-b9aa-49e2-9411-c0357ca03fe8' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/aed03155-22cd-446a-96d8-54cfd95e04fb' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/8f306e96-8767-480f-858f-41623038dbd2' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/b9a6d27f-f225-4d02-8b05-b8ab4dd55fa5' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/b2fbe22f-4920-4628-b673-011d036ae4fb' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/607db6b7-07d2-4307-9ded-9e959bd15fcf' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/fd8eded1-d248-4552-94d2-21e983d24dcd' alt='' width='800'/>
      <img src='https://github.com/ConnectAI-E/Lark-OpenAI/assets/110169811/4d7b0a16-2871-4472-bd78-78d3989c050d' alt='' width='800'/>
    </p>
</details>


- Lấy [OpenAI](https://platform.openai.com/account/api-keys) KEY (🙉 Dưới đây là các key miễn phí có sẵn cho tất cả mọi người để kiểm tra triển khai)
- Tạo Bot trên [lark](https://open.larksuit.com/)
    1. Truy cập [Feishu Open Platform](https://open.feishu.cn/?lang=en-US), tạo ứng dụng và lấy APPID và Secret.
    2. Điều hướng đến phần "Features-Bot", tạo bot.
    3. Lấy địa chỉ công khai từ cpolar, serverless hoặc Railway, và điền vào phần "Event Subscription" của backend bot Lark. Ví dụ,
        - `http://xxxx.r6.cpolar.top` là địa chỉ công khai được cpolar tiếp cận.
        - `/webhook/event` là tuyến đường ứng dụng thống nhất.
        - Địa chỉ gọi lại cuối cùng là `http://xxxx.r6.cpolar.top/webhook/event`.
    4. Trong phần "Bot" của backend bot Lark, điền vào URL yêu cầu cho thẻ tin nhắn. Ví dụ,
        - `http://xxxx.r6.cpolar.top` là địa chỉ công khai được cpolar tiếp cận.
        - `/webhook/card` là tuyến đường ứng dụng thống nhất.
        - URL yêu cầu cuối cùng cho thẻ tin nhắn là `http://xxxx.r6.cpolar.top/webhook/card`.
    5. Trong phần "Event Subscription", tìm kiếm ba thuật ngữ: "Bot Join Group," "Receive Messages," và "Messages Read." Kiểm tra tất cả các quyền hạn phía sau chúng.
    Điều hướng đến giao diện quản lý quyền hạn, tìm kiếm "Image," và kiểm tra "Get and upload image or file resources."
    Cuối cùng, các sự kiện gọi lại sau đây sẽ được thêm vào:
        - im:resource(Đọc và tải lên hình ảnh hoặc tệp khác)
        - im:message
        - im:message.group_at_msg(Đọc tin nhắn trong nhóm đề cập đến bot)
        - im:message.group_at_msg:readonly(Lấy tin nhắn nhóm đề cập đến bot)
        - im:message.p2p_msg(Đọc tin nhắn riêng được gửi đến bot)
        - im:message.p2p_msg:readonly(Lấy tin nhắn riêng được gửi đến bot)
        - im:message:send_as_bot(Gửi tin nhắn dưới dạng ứng dụng)
        - im:chat:readonly(Lấy thông tin nhóm)
        - im:chat(Lấy và cập nhật thông tin nhóm)

5. Xuất bản phiên bản và chờ sự phê duyệt từ quản trị viên doanh nghiệp.

## Connect-AI Thêm


|  

 <div style="width:300px">AI</div>  |                       <img width=100> SDK <img width=100>                       |                      Application                       |
| :---------------------------------------------: | :--------------------------------------------------------------------------: | :------------------------------------------------: |
|               🎒OpenAI                | [Go-OpenAI](https://github.com/ConnectAI-E/Go-OpenAI) | [🏅Feishu-OpenAI](https://github.com/ConnectAI-E/Feishu-OpenAI), [Lark-OpenAI](https://github.com/ConnectAI-E/Lark-OpenAI), [🏅Feishu-EX-ChatGPT](https://github.com/ConnectAI-E/Feishu-EX-ChatGPT), [Feishu-OpenAI-Stream-Chatbot](https://github.com/ConnectAI-E/Feishu-OpenAI-Stream-Chatbot), [Feishu-OpenAI-Amazing](https://github.com/ConnectAI-E/Feishu-OpenAI-Amazing), [Feishu-Oral-Friend](https://github.com/ConnectAI-E/Feishu-Oral-Friend), [Feishu-OpenAI-Base-Helper](https://github.com/ConnectAI-E/Feishu-OpenAI-Base-Helper), [Feishu-Vector-Knowledge-Management](https://github.com/ConnectAI-E/Feishu-Vector-Knowledge-Management), [Feishu-OpenAI-PDF-Helper](https://github.com/ConnectAI-E/Feishu-OpenAI-PDF-Helper), [🏅Dingtalk-OpenAI](https://github.com/ConnectAI-E/Dingtalk-OpenAI), [Wework-OpenAI](https://github.com/ConnectAI-E/Wework-OpenAI), [WeWork-OpenAI-Node](https://github.com/ConnectAI-E/WeWork-OpenAI-Node), [llmplugin](https://github.com/ConnectAI-E/llmplugin) |
|              🎭 Stablediffusion             |                                ------                                | [🏅Feishu-Stablediffusion](https://github.com/ConnectAI-E/Feishu-Stablediffusion) |
|                🍎 Midjourney                | [Go-Midjourney](https://github.com/ConnectAI-E/Feishu-Midjourney/tree/main/midjourney) | [🏅Feishu-Midjourney](https://github.com/ConnectAI-E/Feishu-Midjourney), [MidJourney-Web](https://github.com/ConnectAI-E/MidJourney-Web), [Dingtalk-Midjourney](https://github.com/ConnectAI-E/Dingtalk-Midjourney) |
|                 🍍 Wenxin                   |   [Go-Wenxin](https://github.com/ConnectAI-E/Go-Wenxin)   | [Feishu-Wenxin](https://github.com/ConnectAI-E/Feishu-Wenxin), [Dingtalk-Wenxin](https://github.com/ConnectAI-E/Dingtalk-Wenxin), [Wework-Wenxin](https://github.com/ConnectAI-E/Wework-Wenxin) |
|                 💸 Minimax                  |  [Go-Minimax](https://github.com/ConnectAI-E/Go-Minimax)  | [Feishu-Minimax](https://github.com/ConnectAI-E/Feishu-Minimax

), [Dingtalk-Minimax](https://github.com/ConnectAI-E/Dingtalk-Minimax), [Wework-Minimax](https://github.com/ConnectAI-E/Wework-Minimax) |
|                 ⛳️ CLAUDE                   |   [Go-Claude](https://github.com/ConnectAI-E/Go-Claude)   | [Feishu-Claude](https://github.com/ConnectAI-E/Feishu-Claude), [DingTalk-Claude](https://github.com/ConnectAI-E/DingTalk-Claude), [Wework-Claude](https://github.com/ConnectAI-E/Wework-Claude) |
|                 🎡 Prompt                   |                                                             | [Prompt-Engineering-Tutior](https://github.com/ConnectAI-E/Prompt-Engineering-Tutior) |
|                🤖️ ChatGLM                  |                                                             | [Feishu-ChatGLM](https://github.com/ConnectAI-E/Feishu-ChatGLM) |

